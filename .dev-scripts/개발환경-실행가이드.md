# APS Admin - 개발 환경 실행 가이드

## 🚀 빠른 실행

### PowerShell에서 실행 (추천)

```powershell
# 프로젝트 폴더에서
.\.dev-scripts\start-dev.ps1
```

이 스크립트가 자동으로:
1. 🏠 로컬 백엔드 서버 시작 (포트 3001)
2. ⚡ Vite 개발 서버 시작 (포트 5173)
3. 🖥️ Electron 앱 실행

**3개의 터미널 창이 자동으로 열립니다.**

### 중지

```powershell
.\.dev-scripts\stop-dev.ps1
```

또는 각 터미널에서 `Ctrl+C`

---

## 📋 수동 실행 (문제 발생 시)

### 터미널 1: 백엔드
```bash
cd backend-local
npm start
```

### 터미널 2: Vite
```bash
npm run dev
```

### 터미널 3: Electron
```bash
# Vite가 시작된 후 (http://localhost:5173 확인)
npm run electron
```

---

## 🔍 실행 확인

### 브라우저 콘솔 (F12)
```
🏠 LOCAL BACKEND: http://localhost:3001  (녹색)
```
→ 로컬 백엔드에 연결됨

```
☁️ GCP BACKEND: https://inquiryapi-...  (파란색)
```
→ GCP 백엔드에 연결됨

### 백엔드 터미널
```
============================================================
🏠 APS Admin LOCAL Backend Server Starting...
============================================================
✓ GET /inquiries - 200 (4607ms)
```

---

## ⚙️ 환경 전환

### 로컬 백엔드 사용 (현재 설정)
`.env.development`:
```env
VITE_API_URL=http://localhost:3001
```

### GCP 백엔드 사용
`.env.development`:
```env
VITE_API_URL=https://inquiryapi-mbi34yrklq-uc.a.run.app
```

---

## 🐛 문제 해결

### 포트가 이미 사용 중
```powershell
.\.dev-scripts\stop-dev.ps1
```
그리고 다시 시작

### PowerShell 실행 정책 오류
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 백엔드 연결 실패
1. 백엔드 터미널 확인 (포트 3001에서 실행 중인지)
2. `.env.development` 확인 (`VITE_API_URL=http://localhost:3001`)
3. 브라우저 콘솔 확인 (어느 서버에 연결되었는지)

---

## 📁 파일 구조

```
APS_APP/
├── .dev-scripts/              # 개발 환경 관리 스크립트
│   ├── start-dev.ps1          # 개발 환경 시작 스크립트
│   ├── stop-dev.ps1           # 개발 환경 중지 스크립트
│   └── 개발환경-실행가이드.md  # 실행 가이드
├── backend-local/             # 로컬 백엔드 서버
│   ├── server.js
│   ├── .env                   # 백엔드 환경변수
│   └── service-account.json   # GCP 인증키
├── .env.development           # 프론트엔드 환경변수
└── ...
```

---

## 🌐 서비스 주소

- **백엔드**: http://localhost:3001
- **Vite**: http://localhost:5173
- **Electron**: 자동 실행
