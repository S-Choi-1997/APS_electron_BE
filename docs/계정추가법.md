# ê´€ë¦¬ì ê³„ì • ì¶”ê°€ ë°©ë²•

> backend-localì˜ `create-admin.js` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ê³„ì • ìƒì„±

---

## ê¸°ë³¸ ì‚¬ìš©ë²•

```bash
cd backend-local
node create-admin.js <ì´ë©”ì¼> <ë¹„ë°€ë²ˆí˜¸> [ì´ë¦„] [role]
```

### íŒŒë¼ë¯¸í„° ì„¤ëª…
- **ì´ë©”ì¼** (í•„ìˆ˜): ë¡œê·¸ì¸ì— ì‚¬ìš©í•  ì´ë©”ì¼ ì£¼ì†Œ
- **ë¹„ë°€ë²ˆí˜¸** (í•„ìˆ˜): 8ì ì´ìƒì˜ ë¹„ë°€ë²ˆí˜¸
- **ì´ë¦„** (ì„ íƒ): í‘œì‹œ ì´ë¦„ (ìƒëµ ì‹œ ì´ë©”ì¼ì´ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©)
- **role** (ì„ íƒ): `admin` ë˜ëŠ” `user` (ìƒëµ ì‹œ `admin`)

---

## ì˜ˆì‹œ

### 1. ê´€ë¦¬ì ê³„ì • ìƒì„±
```bash
node create-admin.js admin@test.com TestPass123 "ê´€ë¦¬ì" admin
```

### 2. ì¼ë°˜ ì‚¬ìš©ì ìƒì„±
```bash
node create-admin.js user@test.com UserPass123 "ì‚¬ìš©ì" user
```

### 3. ì´ë¦„ ìƒëµ (ì´ë©”ì¼ì´ ì´ë¦„ìœ¼ë¡œ)
```bash
node create-admin.js test@test.com Pass12345678
```

---

## ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ

```bash
$ node create-admin.js admin@test.com TestPass123 "í…ŒìŠ¤íŠ¸ ê´€ë¦¬ì" admin

âœ“ Firebase Admin initialized

[Create Admin] Creating admin user: admin@test.com
[Create Admin] Creating Firestore document...
[FirestoreAdmin] Created admin: admin@test.com (role: admin)

âœ… Admin user created successfully in Firestore!
---------------------------------------------------
Email:        admin@test.com
Display Name: í…ŒìŠ¤íŠ¸ ê´€ë¦¬ì
Role:         admin
Active:       true
Provider:     local
---------------------------------------------------

You can now login with these credentials.
```

---

## ì£¼ì˜ì‚¬í•­

### í™˜ê²½ë³€ìˆ˜ ì„¤ì • í•„ìˆ˜
ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì „ì— GCP ì¸ì¦ì´ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:

```bash
# backend-local/.env íŒŒì¼ì— ìˆì–´ì•¼ í•¨
GOOGLE_APPLICATION_CREDENTIALS=./gcp-service-account.json
```

### ë¹„ë°€ë²ˆí˜¸ ê·œì¹™
- ìµœì†Œ 8ì ì´ìƒ
- 8ì ë¯¸ë§Œ ì‹œ ì˜¤ë¥˜: `Password must be at least 8 characters`

---

## ì˜¤ë¥˜ í•´ê²°

### "User already exists" ì˜¤ë¥˜
```
âŒ Error: User admin@test.com already exists in Firestore

Existing user details:
  Email:        admin@test.com
  Display Name: ê´€ë¦¬ì
  Role:         admin
  Active:       true
```

**í•´ê²° ë°©ë²•:**
- ë‹¤ë¥¸ ì´ë©”ì¼ ì£¼ì†Œ ì‚¬ìš©
- ë˜ëŠ” Firestore Consoleì—ì„œ ê¸°ì¡´ ì‚¬ìš©ì ì‚­ì œ í›„ ì¬ìƒì„±

### "Firebase Admin initialization failed" ì˜¤ë¥˜
**ì›ì¸:** `GOOGLE_APPLICATION_CREDENTIALS` í™˜ê²½ë³€ìˆ˜ ë¯¸ì„¤ì •

**í•´ê²° ë°©ë²•:**
```bash
# .env íŒŒì¼ í™•ì¸
cat backend-local/.env | grep GOOGLE_APPLICATION_CREDENTIALS

# JSON íŒŒì¼ ê²½ë¡œ í™•ì¸
ls backend-local/gcp-service-account.json
```

### "Password must be at least 8 characters" ì˜¤ë¥˜
**í•´ê²° ë°©ë²•:** ë¹„ë°€ë²ˆí˜¸ë¥¼ 8ì ì´ìƒìœ¼ë¡œ ì„¤ì •

---

## ìƒì„±ëœ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸

1. Electron ì•± ì‹¤í–‰
2. ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ ìƒì„±í•œ ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
3. ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
4. ì„±ê³µ! ğŸ‰

---

## ê³„ì • ì‚­ì œ

### Firestore Consoleì—ì„œ ì‚­ì œ
1. Firebase Console â†’ Firestore Database
2. `admins` ì»¬ë ‰ì…˜
3. ì‚­ì œí•  ì´ë©”ì¼ì˜ ë¬¸ì„œ ì„ íƒ
4. ì‚­ì œ ë²„íŠ¼ í´ë¦­

### CLIë¡œ ì‚­ì œ (ìŠ¤í¬ë¦½íŠ¸ ì—†ìŒ)
í˜„ì¬ëŠ” Firestore Consoleì—ì„œ ìˆ˜ë™ ì‚­ì œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
